{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\OneDrive\\\\Desktop\\\\expense-tracker\\\\frontend\\\\src\\\\context\\\\globalContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useState, useCallback } from \"react\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = \"http://localhost:5000/api/\";\nconst GlobalContext = /*#__PURE__*/React.createContext();\nexport const GlobalProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [incomes, setIncomes] = useState([]);\n  const [expenses, setExpenses] = useState([]);\n  const [error, setError] = useState(null);\n\n  // Get token from localStorage\n  const getToken = () => localStorage.getItem('token');\n\n  // ----------------- Auth --------------------\n  const loginUser = async (email, password) => {\n    const response = await fetch(`${BASE_URL}user/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    const {\n      token,\n      user\n    } = await response.json();\n    return {\n      token,\n      user\n    };\n  };\n  const registerUser = async (name, email, password) => {\n    const response = await fetch(`${BASE_URL}user/register`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    });\n    const {\n      token,\n      user\n    } = await response.json();\n    return {\n      token,\n      user\n    };\n  };\n  const getProfile = async () => {\n    const response = await axios.get(`${BASE_URL}user/get-profile`, {\n      headers: {\n        'auth-token': getToken()\n      }\n    });\n    return response.data;\n  };\n\n  // ---------------- Incomes ------------------\n\n  const addIncome = async income => {\n    try {\n      await axios.post(`${BASE_URL}transactions/add-income`, income, {\n        headers: {\n          'auth-token': getToken()\n        }\n      });\n      await getIncomes();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to add income');\n    }\n  };\n  const getIncomes = async () => {\n    const response = await axios.get(`${BASE_URL}transactions/get-incomes`, {\n      headers: {\n        'auth-token': getToken()\n      }\n    });\n    setIncomes(response.data);\n  };\n  const deleteIncome = async id => {\n    await axios.delete(`${BASE_URL}transactions/delete-income/${id}`, {\n      headers: {\n        'auth-token': getToken()\n      }\n    });\n    await getIncomes();\n  };\n  const totalIncome = () => incomes.reduce((sum, item) => sum + item.amount, 0);\n\n  // ---------------- Expenses ------------------\n\n  const addExpense = async expense => {\n    try {\n      await axios.post(`${BASE_URL}transactions/add-expense`, expense, {\n        headers: {\n          'auth-token': getToken()\n        }\n      });\n      await getExpenses();\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to add expense');\n    }\n  };\n  const getExpenses = async () => {\n    const response = await axios.get(`${BASE_URL}transactions/get-expenses`, {\n      headers: {\n        'auth-token': getToken()\n      }\n    });\n    setExpenses(response.data);\n  };\n  const deleteExpense = async id => {\n    await axios.delete(`${BASE_URL}transactions/delete-expense/${id}`, {\n      headers: {\n        'auth-token': getToken()\n      }\n    });\n    await getExpenses();\n  };\n  const totalExpenses = () => expenses.reduce((sum, item) => sum + item.amount, 0);\n  const totalBalance = () => totalIncome() - totalExpenses();\n\n  // ---------------- Transaction History ------------------\n\n  const transactionHistory = useCallback(async () => {\n    const token = getToken();\n    if (!token) return [];\n    const [incomesRes, expensesRes] = await Promise.all([axios.get(`${BASE_URL}transactions/get-incomes`, {\n      headers: {\n        'auth-token': token\n      }\n    }), axios.get(`${BASE_URL}transactions/get-expenses`, {\n      headers: {\n        'auth-token': token\n      }\n    })]);\n    const all = [...incomesRes.data, ...expensesRes.data];\n    all.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    return all.slice(0, 3);\n  }, []);\n\n  // --------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: {\n      loginUser,\n      registerUser,\n      getProfile,\n      addIncome,\n      getIncomes,\n      incomes,\n      deleteIncome,\n      expenses,\n      totalIncome,\n      addExpense,\n      getExpenses,\n      deleteExpense,\n      totalExpenses,\n      totalBalance,\n      transactionHistory,\n      error,\n      setError\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n};\n_s(GlobalProvider, \"8bwSEpmjxKBeO64rCF0fHGTgNSs=\");\n_c = GlobalProvider;\nexport const useGlobalContext = () => {\n  _s2();\n  return useContext(GlobalContext);\n};\n_s2(useGlobalContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"GlobalProvider\");","map":{"version":3,"names":["React","useContext","useState","useCallback","axios","BASE_URL","GlobalContext","createContext","GlobalProvider","children","incomes","setIncomes","expenses","setExpenses","error","setError","getToken","localStorage","getItem","loginUser","email","password","response","fetch","method","headers","body","JSON","stringify","token","user","json","registerUser","name","getProfile","get","data","addIncome","income","post","getIncomes","err","message","deleteIncome","id","delete","totalIncome","reduce","sum","item","amount","addExpense","expense","getExpenses","deleteExpense","totalExpenses","totalBalance","transactionHistory","incomesRes","expensesRes","Promise","all","sort","a","b","Date","createdAt","slice","useGlobalContext"],"sources":["C:/Users/Asus/OneDrive/Desktop/expense-tracker/frontend/src/context/globalContext.js"],"sourcesContent":["import React, { useContext, useState, useCallback } from \"react\"\nimport axios from 'axios'\n\nconst BASE_URL = \"http://localhost:5000/api/\";\nconst GlobalContext = React.createContext()\n\nexport const GlobalProvider = ({ children }) => {\n  const [incomes, setIncomes] = useState([])\n  const [expenses, setExpenses] = useState([])\n  const [error, setError] = useState(null)\n\n  // Get token from localStorage\n  const getToken = () => localStorage.getItem('token');\n\n  // ----------------- Auth --------------------\n  const loginUser = async (email, password) => {\n    const response = await fetch(`${BASE_URL}user/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ email, password }),\n    });\n\n    const { token, user } = await response.json();\n    return { token, user };\n  }\n\n  const registerUser = async (name, email, password) => {\n    const response = await fetch(`${BASE_URL}user/register`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, email, password }),\n    });\n\n    const { token, user } = await response.json();\n    return { token, user };\n  }\n\n  const getProfile = async () => {\n    const response = await axios.get(`${BASE_URL}user/get-profile`, {\n      headers: { 'auth-token': getToken() }\n    });\n    return response.data;\n  }\n\n  // ---------------- Incomes ------------------\n\n  const addIncome = async (income) => {\n    try {\n      await axios.post(`${BASE_URL}transactions/add-income`, income, {\n        headers: { 'auth-token': getToken() }\n      });\n      await getIncomes();\n    } catch (err) {\n      setError(err.response?.data?.message || 'Failed to add income');\n    }\n  }\n\n  const getIncomes = async () => {\n    const response = await axios.get(`${BASE_URL}transactions/get-incomes`, {\n      headers: { 'auth-token': getToken() }\n    });\n    setIncomes(response.data);\n  }\n\n  const deleteIncome = async (id) => {\n    await axios.delete(`${BASE_URL}transactions/delete-income/${id}`, {\n      headers: { 'auth-token': getToken() }\n    });\n    await getIncomes();\n  }\n\n  const totalIncome = () => incomes.reduce((sum, item) => sum + item.amount, 0);\n\n  // ---------------- Expenses ------------------\n\n  const addExpense = async (expense) => {\n    try {\n      await axios.post(`${BASE_URL}transactions/add-expense`, expense, {\n        headers: { 'auth-token': getToken() }\n      });\n      await getExpenses();\n    } catch (err) {\n      setError(err.response?.data?.message || 'Failed to add expense');\n    }\n  }\n\n  const getExpenses = async () => {\n    const response = await axios.get(`${BASE_URL}transactions/get-expenses`, {\n      headers: { 'auth-token': getToken() }\n    });\n    setExpenses(response.data);\n  }\n\n  const deleteExpense = async (id) => {\n    await axios.delete(`${BASE_URL}transactions/delete-expense/${id}`, {\n      headers: { 'auth-token': getToken() }\n    });\n    await getExpenses();\n  }\n\n  const totalExpenses = () => expenses.reduce((sum, item) => sum + item.amount, 0);\n\n  const totalBalance = () => totalIncome() - totalExpenses();\n\n  // ---------------- Transaction History ------------------\n\n  const transactionHistory = useCallback(async () => {\n    const token = getToken();\n    if (!token) return [];\n\n    const [incomesRes, expensesRes] = await Promise.all([\n      axios.get(`${BASE_URL}transactions/get-incomes`, { headers: { 'auth-token': token } }),\n      axios.get(`${BASE_URL}transactions/get-expenses`, { headers: { 'auth-token': token } }),\n    ]);\n\n    const all = [...incomesRes.data, ...expensesRes.data];\n    all.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n    return all.slice(0, 3);\n  }, []);\n\n  // --------------------------------------------------------\n\n  return (\n    <GlobalContext.Provider value={{\n      loginUser,\n      registerUser,\n      getProfile,\n      addIncome,\n      getIncomes,\n      incomes,\n      deleteIncome,\n      expenses,\n      totalIncome,\n      addExpense,\n      getExpenses,\n      deleteExpense,\n      totalExpenses,\n      totalBalance,\n      transactionHistory,\n      error,\n      setError\n    }}>\n      {children}\n    </GlobalContext.Provider>\n  )\n}\n\nexport const useGlobalContext = () => useContext(GlobalContext);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}